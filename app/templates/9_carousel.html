{% block script %}
    <script defer type="text/javascript" src="{{ url_for('static', filename='javascript/carousel/add_listeners.js') }}"></script>
    <script defer type="text/javascript" src="{{ url_for('static', filename='javascript/redirect/redirect_collection.js') }}"></script>
{% endblock %}

<div class="col" style="background-color: black; padding:5px 5px 5px 5px; margin:5px 5px 5px 5px">
    <div class="row" style="justify-content: center; background-color: pink; padding:5px 5px 5px 5px; margin:5px 5px 5px 5px">
        Search by Feature
    </div>
    <div class="row" style="justify-content: center; background-color: pink; padding:5px 5px 5px 5px; margin:5px 5px 5px 5px">
        <div id="demo" class="carousel slide" data-ride="carousel">

            <div class="carousel-inner">

                {% for item in range(3) %}
                {% if item == 0 %}
                    <div class="carousel-item active">
                {% else %}
                    <div class="carousel-item">
                {% endif %}
                    <div class="col">
                        <div class="row">
                            <div id="{{model_formats['icon_list'][item*4]}}" class="col" style="text-align:center; background-color: grey; padding:5px 5px 5px 5px; margin:5px 5px 5px 5px">
                                <div class="row" style="justify-content: center; background-color: green; padding:5px 5px 5px 5px; margin:5px 5px 5px 5px">
                                    <img src="/static/images/{{model_formats['icon_list'][item*4]}}.jpeg" height="75px" width="95px" alt="Live Music">
                                </div>
                                <div class="row" style="justify-content: center; background-color: green; padding:5px 5px 5px 5px; margin:5px 5px 5px 5px">
                                    {{model_formats['icon_list'][item*4]}}</div>
                            </div>
                            <div id="{{model_formats['icon_list'][(item*4)+1]}}" class="col" style="text-align:center; background-color: grey; padding:5px 5px 5px 5px; margin:5px 5px 5px 5px">
                                <div class="row" style="justify-content: center; background-color: green; padding:5px 5px 5px 5px; margin:5px 5px 5px 5px">
                                    <img src="/static/images/{{model_formats['icon_list'][(item*4)+1]}}.jpeg" height="75px" width="95px" alt="Open Late">
                                </div>
                                <div class="row" style="justify-content: center; background-color: green; padding:5px 5px 5px 5px; margin:5px 5px 5px 5px">
                                    {{model_formats['icon_list'][(item*4)+1]}}</div>
                            </div>
                        </div>
                        <div class="row">
                            <div id="{{model_formats['icon_list'][(item*4)+2]}}" class="col" style="text-align:center; background-color: grey; padding:5px 5px 5px 5px; margin:5px 5px 5px 5px">
                                <div class="row" style="justify-content: center; background-color: green; padding:5px 5px 5px 5px; margin:5px 5px 5px 5px">
                                    <img src="/static/images/{{model_formats['icon_list'][(item*4)+2]}}.jpeg" height="75px" width="95px" alt="Quiz">
                                </div>
                                <div class="row" style="justify-content: center; background-color: green; padding:5px 5px 5px 5px; margin:5px 5px 5px 5px">
                                    {{model_formats['icon_list'][(item*4)+2]}}</div>
                            </div>
                            <div id="{{model_formats['icon_list'][(item*4)+3]}}" class="col" style="text-align:center; background-color: grey; padding:5px 5px 5px 5px; margin:5px 5px 5px 5px">
                                <div class="row" style="justify-content: center; background-color: green; padding:5px 5px 5px 5px; margin:5px 5px 5px 5px">
                                    <img src="/static/images/{{model_formats['icon_list'][(item*4)+3]}}.jpeg" height="75px" width="95px" alt="Roast">
                                </div>
                                <div class="row" style="justify-content: center; background-color: green; padding:5px 5px 5px 5px; margin:5px 5px 5px 5px">
                                    {{model_formats['icon_list'][(item*4)+3]}}</div>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}

            </div>

            <a class="carousel-control-prev" href="#demo" data-slide="prev">
                <span class="carousel-control-prev-icon"></span>
            </a>
            <a class="carousel-control-next" href="#demo" data-slide="next">
                <span class="carousel-control-next-icon"></span>
            </a>

        </div>
    </div>

    <div class="row" style="justify-content: center; background-color: pink; padding:5px 5px 5px 5px; margin:5px 5px 5px 5px">
        <button onclick="redirect_collection()">View All Pubs</button>
    </div>
</div>

<script>
/*
model_format = {{model_formats | tojson}}['icon_list']
for (field in model_format) {
    var marker = model_format[field]
    document.getElementById(marker).addEventListener('click', (function (marker) {
        return function () {
            var base_url = window.location.hostname
            if ('{{env_vars['env']}}' == 'qual') {
                var url = "http://" + base_url + ":5000/collection/"
            } else {
                var url = "http://" + base_url + "/collection/"
            }
            const myUrlWithParams = new URL(url);
            myUrlWithParams.searchParams.append('feature', marker);
            window.location.replace(myUrlWithParams.href);
            }
        })(marker))
}
*/
</script>
